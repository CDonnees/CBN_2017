<!DOCTYPE html> 
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.8.3/jquery.csv.min.js"></script>

<script src="backoffice.js"></script>

</head>

<body>

    <div class="container">

        <h1>Backoffice</h1>


        <div id="section-login" class="panel panel-default">
            <div class="panel-heading"><h2>Compte Github</h2></div>
            <div class="panel-body">
            
                <p class="text-muted">Vous devez disposer des droits en écriture sur le référentiel github.</p>
                <div class="form-inline">
                    
                    <label label-for="gh-login">Login</label>
                    <input id="gh-login" class="form-control">

                    <label label-for="gh-pwd">Mot de passe</label>
                    <input id="gh-pwd" type="password" class="form-control">
                
                    <button id="bt-connect" class="btn btn-success" onclick="ghConnect(event)">Connexion</button>

                    <br>
                    <br>
                    <div id="section-login-error" class="alert alert-danger hidden">
                        Login ou mot de passe invalide, veuillez vérifier votre saisie.
                    </div>
                </div>

                
            </div>
        </div>

        <div id="section-import" class="hidden">

            <div class="panel panel-default">
                <div class="panel-heading"><h2>Donnée actuelle</h2></div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-4">
                            <p class="text-muted">Ci-dessous les informations relatives aux données actuelles du site.</p>
                            <div id="diagnostic-db"></div>
                        </div>
                        <div class="col-md-4">
                            <p>Lieux pris en compte :</p>
                            <ul id="supported-locations">/<ul>
                        </div>
                        <div class="col-md-4">
                            <p>Emplacements pris en compte :</p>
                            <p id="supported-categories">/<p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading"><h2>Import <span id="expexted-periode"></span></h2></div>
                <div class="panel-body">
                    
                    <div class="col-md-7">

                    <div class="text-muted">
                        Veuillez coller le contenu de votre tableur dans la zone ci-dessous :
                        <ul>
                            <li>Ouvrez votre tableur Excel</li>
                            <li>Selectionnez toutes les cellules (CTRL+A)</li>
                            <li>Copiez les cellules (CTRL+C)</li>
                            <li>Coller les cellules dans le champs ci-dessous (CTRL+V)</li>
                        </ul>
                    </div>
                    <input id="tainput">

                    
                    <div id="diagnostic"></div>
                    
                    
                    <div id="section-commit" class="hidden">
                        <button class="btn btn-danger" onclick="actionCommit(event)">Mettre à jour le site</button>
                        <button class="btn btn-default" onclick="actionCancelImport(event)">Annuler</button>
                    </div>

                    <div id="section-status"></div>


                </div>

                <div class="col-md-5">
                    <div class="text-muted">
                        Votre tableur doit respecter les règles suivantes : 
                        <ul>
                            <li>des données pour un seul mois</li>
                            <li>des données correspondant au format ci-dessous :</li>
                        </ul>
                        <table class="table-bordered text-muted">
                            <tr>
                                <td>Lieu de prêt</td>
                                <td>Emplacement</td>
                                <td>Nb prêt<br>02/01/17</td>
                                <td>Nb prêt<br>03/01/17</td>
                                <td>Nb prêt<br>...etc</td>
                            </tr>
                            <tr>
                                <td>Tous</td>
                                <td></td>
                                <td>nombre</td>
                                <td>nombre</td>
                                <td>nombre...</td>
                            </tr>
                            <tr>
                                <td>Lieu 1</td>
                                <td>TOTAL</td>
                                <td>nombre</td>
                                <td>nombre</td>
                                <td>nombre...</td>
                            </tr>
                            <tr>
                                <td>Lieu 1</td>
                                <td>emplacement 1</td>
                                <td>nombre</td>
                                <td>nombre</td>
                                <td>nombre...</td>
                            </tr>
                            <tr>
                                <td>Lieu 1</td>
                                <td>emplacement 2</td>
                                <td>nombre</td>
                                <td>nombre</td>
                                <td>nombre...</td>
                            </tr>
                            <tr>
                                <td>Lieu 2</td>
                                <td>emplacement 1</td>
                                <td>nombre</td>
                                <td>nombre</td>
                                <td>nombre...</td>
                            </tr>
                            <tr>
                                <td colspan="5">...</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="debug"></div>

</body>

</html>
